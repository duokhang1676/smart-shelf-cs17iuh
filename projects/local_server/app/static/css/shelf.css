/*
* Copyright 2025 Tran Vu Thuy Trang [C]
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');
/* Import Google Fonts */
/* Tablet portrait: keep scroll to avoid overflow while preserving 5 columns visually */
@media (max-width: 1024px) and (orientation: portrait) {
    .shelf-row {
    grid-template-columns: repeat(5, minmax(9rem, 1fr));
    overflow-x: auto; /* enable scroll inside row */
    max-width: 100%;
    }
    .product-slot {
        min-width: 9rem; /* matches track min */
    }
}
/* Layout safety: ensure padding/border don't cause overflow */
*, *::before, *::after {
    box-sizing: border-box;
}
    
body {
    font-family: 'Montserrat', sans-serif;
    min-height: 100vh;
    padding: 1.25rem; /* 20px */
    position: relative;
    margin: 0;
    display: flex;
    flex-direction: column;
    color: #000000;
    line-height: 1.6;
    overflow-x: hidden; /* Prevent page-level horizontal scroll */
    overflow-y: auto; /* Allow vertical scroll */
}

.container {
    max-width: 90vw;
    margin: 0 auto;
    border-radius: 1.25rem; /* 20px */
    padding: 2.5rem; /* 40px */
    padding-left: 4.375rem; /* 70px */
    padding-right: 4.375rem; /* 70px */
    overflow: visible; /* Allow child elements to overflow */
    box-sizing: border-box; /* Include padding in max-width */
}

h1 {
    text-align: center;
    color: #2d3a4a;
    font-size: 3em;
    margin-bottom: 0.625rem; /* 10px */
    padding-bottom: 5vh;
    font-weight: 600;

}

.subtitle {
    text-align: center;
    color: #666;
    font-size: 1.2em;
    margin-bottom: 2.5rem; /* 40px */
}

.shelf-container {
    display: flex;
    flex-direction: column;
    gap: 2.5rem; /* 40px */
    margin: 2rem auto 0; /* Increased top margin even more */
    overflow: visible; /* Ensure container doesn't clip children */
}

.shelf-tier {
    border-radius: 0.9375rem; /* 15px */
    padding: 0.9375rem; /* 15px */
    padding-top: 1.5rem; /* Extra padding top for badge space */
    box-shadow: 0 0.625rem 1.25rem rgba(0,0,0,0.2); /* 0 10px 20px */
    position: relative;
    overflow-x: visible; /* Allow badge to overflow horizontally */
    overflow-y: visible; /* Allow vertical overflow for badge only */
    isolation: isolate; /* Create new stacking context */
    max-width: 100%; /* Stay within viewport width */
}

/* Custom scrollbar styling */
.shelf-tier::-webkit-scrollbar {
    height: 0.5rem; /* 8px */
}

.shelf-tier::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 0.25rem; /* 4px */
    margin: 0 0.5rem; /* 8px margin on sides */
}

.shelf-tier::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 0.25rem; /* 4px */
}

.shelf-tier::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}

/* Firefox scrollbar styling (supported in Firefox only) */
@supports (scrollbar-width: thin) {
    .shelf-tier {
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
    }
}

.shelf-tier::before {
    content: attr(data-tier);
    position: absolute;
    top: 0; /* Start from top of container */
    left: 1.25rem; 
    transform: translateY(-50%); /* Move up by half its height */
    background: #667eea;
    color: white;
    padding: 0.3125rem 0.9375rem; /* 5px 15px */
    border-radius: 1.25rem; /* 20px */
    font-weight: bold;
    font-size: 0.9em;
    box-shadow: 0 0.3125rem 0.625rem rgba(0,0,0,0.2); /* 0 5px 10px */
    z-index: 999; /* Much higher z-index */
    white-space: nowrap; /* Prevent text wrapping */
    pointer-events: none; /* Prevent interference with scrolling */
    clip-path: none; /* Ensure no clipping */
}

.shelf-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* Fit 5 columns within container */
    gap: 0.75rem; /* 0.375rem (6px to 12px) */   
    margin-top: 0.5rem; /* 0.625rem (10px to 8px) */
    padding: 0.1875rem; /* 0.25rem (4px to 3px) */
    width: 100%; /* Occupy container width */
    overflow-x: auto; /* Scroll only when needed (e.g., tablet portrait) */
    overflow-y: hidden; /* Hide vertical overflow in the row */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    max-width: 100%; /* Never exceed shelf-tier width */
}
    
.product-slot {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 0.5rem; /* 0.625rem (10px to 8px) */
    padding: 0.625rem; /* 0.75rem (12px to 10px) */
    box-shadow: 0 0.1875rem 0.625rem rgba(0,0,0,0.1); /* Reduced shadow */
    transition: all 0.3s ease;
    position: relative;
    overflow: visible; /* Allow discount badge to show outside */
    min-height: 11.5rem; /* Further 13rem (208px to 184px) */
    /* No min-width by default so 5 items always fit */
    box-sizing: border-box; /* Include padding in width */
}

.product-slot:hover {
    transform: translateY(-0.25rem); /* -0.3125rem (-5px to -4px) */
    box-shadow: 0 0.75rem 1.5rem rgba(0,0,0,0.2); /* Reduced shadow */
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.product-image {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    border-radius: 0.25rem; /* Further 0.375rem (6px to 4px) */
    margin-bottom: 0.375rem; /* 0.5rem (8px to 6px) */
    border: 0.0625rem solid #f0f0f0; /* Keep minimal border */
    transition: border-color 0.3s ease;
    background-color: #fafafa;
}.product-slot:hover .product-image {
    border-color: #667eea;
}

.product-name {
    font-size: 0.75em; /* Further 0.8em */
    color: #333;
    margin-bottom: 0.25rem; /* 0.375rem (6px to 4px) */
    line-height: 1.1; /* Further 1.2 */
    height: 1.75rem; /* 2rem (32px to 28px) */
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    font-weight: 500;
    text-align: center;
}

.product-price {
    font-size: 0.95em; /* 1em */
    color: #667eea;
    font-weight: bold;
    text-align: center;
    background: #667eea26;
    padding: 0.1875rem; /* 0.25rem (4px to 3px) */
    border-radius: 0.25rem; /* 0.375rem (6px to 4px) */
    display: flex;
    flex-direction: column;
    gap: 0.125rem; /* 0.1875rem (3px to 2px) */
}

/* Original price styling for discounted products */
.original-price {
    font-size: 0.9em;
    color: #999;
    text-decoration: line-through;
    font-weight: normal;
}

/* Discounted price styling */
.discounted-price {
    font-size: 1.1em;
    color: #27ae60;
    font-weight: bold;
    background: linear-gradient(135deg, #2ecc71, #27ae60);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    position: relative;
}

.product-slot[data-discount]:not([data-discount=""]) {
    position: relative;
}

.product-slot[data-discount]:not([data-discount=""])::before {  
    content: attr(data-discount);
    position: absolute;
    top: -0.1875rem; /* Further -0.25rem (-4px to -3px) */
    right: -0.1875rem; /* Further -0.25rem (-4px to -3px) */
    background: linear-gradient(135deg, #e74c3c, #c0392b);
    color: white;
    font-size: 0.7em; /* 0.75em */
    font-weight: bold;
    padding: 0.1875rem 0.375rem; /* 0.25rem 0.5rem (4px 8px to 3px 6px) */
    border-radius: 0.625rem; /* 0.75rem (12px to 10px) */
    z-index: 10;
    box-shadow: 0 0.0625rem 0.25rem rgba(231, 76, 60, 0.3); /* Reduced shadow */
    border: 0.0625rem solid white; /* Keep minimal border */
    min-width: 1.25rem; /* 1.5rem (24px to 20px) */
    text-align: center;
    /* Ensure badge stays within shelf-tier bounds */
    max-width: 2.5rem; /* 3rem (48px to 40px) */
    overflow: hidden;
    white-space: nowrap;
}

.product-id {
    font-size: 0.7em; /* 0.8em */
    color: #999;
    text-align: center;
    margin-top: 0.25rem; /* 0.3125rem (5px to 4px) */
    display: none; /* Hidden on shelf page */
}

.max-quantity-info {
    position: absolute;
    top: 0.1875rem; /* Further 0.25rem (4px to 3px) */
    left: 0.25rem; /* 0.375rem (6px to 4px) */
    background: #27ae60;
    color: white;
    padding: 0.0625rem 0.25rem; /* Further 0.0625rem 0.375rem (1px 6px to 1px 4px) */
    border-radius: 0.375rem; /* 0.5rem (8px to 6px) */
    font-size: 0.55em; /* 0.6em */
    font-weight: bold;
    min-width: 1.5rem; /* 1.75rem (28px to 24px) */
    text-align: center;
    white-space: nowrap;
}

.max-quantity-low {
    background: #e67e22;
}

.max-quantity-out {
    background: #e74c3c;
}

.navigation {
    text-align: center;
    margin-top: 2.5rem; /* 40px */
}

.nav-button {
    background: linear-gradient(45deg, #667eea, #764ba2);
    color: white;
    border: none;
    padding: 0.9375rem 1.875rem; /* 15px 30px */
    border-radius: 1.5625rem; /* 25px */
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    margin: 0 0.625rem; /* 10px */
    box-shadow: 0 0.3125rem 0.9375rem rgba(0,0,0,0.2); /* 0 5px 15px */
}

.nav-button:hover {
    transform: translateY(-0.125rem); /* -2px */
    box-shadow: 0 0.625rem 1.5625rem rgba(0,0,0,0.3); /* 0 10px 25px */
}

.status-indicator {
    display: inline-block;
    width: 0.75rem; /* 12px */
    height: 0.75rem; /* 12px */
    border-radius: 50%;
    margin-right: 0.3125rem; /* 5px */
    background: #27ae60;
    box-shadow: 0 0 0.625rem rgba(39, 174, 96, 0.5); /* 0 0 10px */
}

.stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 1.875rem; /* 30px */
    background:rgba(255, 255, 255, 0.3);
    padding: 1.25rem; /* 20px */
    border-radius: 0.9375rem; /* 15px */
    box-shadow: 0 0.3125rem 0.9375rem rgba(0,0,0,0.2); /* 0 5px 15px */
}

.stat-item {
    text-align: center;
}

.stat-number {
    font-size: 2em;
    font-weight: bold;
    color: #667eea;
}

.stat-label {
    color: #666;
    font-size: 0.9em;
    margin-top: 0.3125rem; /* 5px */
}

.rfid-indicator {
    position: fixed;
    top: 9.25rem; 
    right: 1.25rem; /* 20px */
    background: rgba(46, 204, 113, 0.9);
    color: white;
    padding: 0.625rem 0.9375rem; /* 10px 15px */
    border-radius: 1.25rem; /* 20px */
    font-size: 0.9em;
    font-weight: bold;
    box-shadow: 0 0.3125rem 0.9375rem rgba(0,0,0,0.1); /* 0 5px 15px */
    z-index: 1000;
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.rfid-indicator.show {
    display: block;
    opacity: 1;
}

.rfid-indicator.error {
    background: rgba(231, 76, 60, 0.9);
}

.rfid-input-display {
    position: fixed;
    bottom: 1.25rem; /* 20px */
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 0.625rem 1.25rem; /* 10px 20px */
    border-radius: 1.5625rem; /* 25px */
    font-family: monospace;
    font-size: 1.1em;
    z-index: 1000;
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.rfid-input-display.show {
    display: block;
    opacity: 1;
}

/* Media Queries */
@media (max-width: 768px) {
    .shelf-row {
        grid-template-columns: repeat(5, 8.5rem); /* Fixed track width for mobile */
        gap: 0.5rem; /* 0.375rem (6px to 8px) */
        padding: 0.1875rem; /* Consistent with desktop */
    overflow-x: auto; /* Scroll on the row */
    max-width: 100%;
    }
    
    .product-slot {
        padding: 0.5rem; /* Further 0.625rem (10px to 8px) */
        min-height: 10rem; /* 11rem (176px to 160px) */
        min-width: 8.5rem; /* Match track size */
    }
    
    .container {
        padding: 1.25rem; /* 20px */
    }
    
    h1 {
        font-size: 2em;
    }
    
    .product-image {
        aspect-ratio: 1;
        object-fit: cover;
    }
    
    .stats {
        flex-direction: column;
        gap: 0.625rem; /* 10px */
    }
}

@media (max-width: 480px) {
    .shelf-row {
        grid-template-columns: repeat(5, 7.5rem); /* Fixed track width for tiny screens */
        gap: 0.375rem; /* 0.25rem (4px to 6px) */
        padding: 0.125rem; /* 0.1875rem (3px to 2px) */
    overflow-x: auto; /* Scroll on the row */
    max-width: 100%;
    }
    
    .product-slot {
        padding: 0.375rem; /* Further 0.5rem (8px to 6px) */
        min-height: 9rem; /* 10rem (160px to 144px) */
        min-width: 7.5rem; /* Match track size */
    }
    
    .product-name {
        font-size: 0.7em; /* Further reduced for tiny screens */
        height: 1.5rem; /* Reduced height for tiny screens */
        line-height: 1;
    }
    
    .product-price {
        font-size: 0.85em; /* Reduced for tiny screens */
        padding: 0.125rem; /* 2px */
    }
    
    .max-quantity-info {
        font-size: 0.5em; /* Extra small for tiny screens */
        min-width: 1.25rem;
        padding: 0.0625rem 0.1875rem; /* 1px 3px */
    }
    
    /* Thinner scrollbar for mobile */
    .shelf-tier::-webkit-scrollbar {
        height: 0.375rem; /* 6px - thinner for mobile */
    }
}

/* Empty slot styling */
.empty-slot {
    height: 10rem; /* 160px */
    background: #f0f0f0;
    border-radius: 0.5rem; /* 8px */
    margin-bottom: 0.625rem; /* 10px */
    display: flex;
    align-items: center;
    justify-content: center;
    color: #999;
}

/* Adding Status Indicator - Top Left */
.adding-status-indicator {
    position: fixed;
    top: 80px;
    left: 20px;
    background: linear-gradient(135deg, #f39c12, #e67e22);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
    display: flex;
    align-items: center;
    gap: 0.75rem;
    z-index: 1000;
    font-weight: 600;
    font-size: 1.1em;
    animation: pulse-glow 2s ease-in-out infinite;
}

.adding-status-icon {
    font-size: 1.5em;
    animation: bounce 1s ease-in-out infinite;
}

.adding-status-text {
    letter-spacing: 0.5px;
}

@keyframes pulse-glow {
    0%, 100% {
        box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
    }
    50% {
        box-shadow: 0 4px 25px rgba(243, 156, 18, 0.7);
    }
}

@keyframes bounce {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-5px);
    }
}

/* Show indicator only during adding state */
.rfid-adding-mode .adding-status-indicator {
    display: flex !important;
}
